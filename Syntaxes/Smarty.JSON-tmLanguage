{
	"name": "Smarty",
	"scopeName": "text.html.smarty",
	"fileTypes": ["tpl"],
	"foldingStartMarker": "\\{%?",
	"foldingStopMarker": "%?\\}",
	"repository": {
		"comments": {
			"patterns": [
				{
					"name": "comment.block.smarty",
					"begin": "(\\{%?)\\*",
					"beginCaptures": {
						"1": {"name": "punctuation.definition.comment.smarty"}
					},
					"patterns": [],
					"end": "\\*(%?\\})"
				}
			]
		},
		"strings": {
			"patterns": [
				{
					"name": "string.quoted.single.smarty",
					"begin": "'",
					"beginCaptures": {
						"0": {"name": "punctuation.definition.string.begin.smarty"}
					},
					"patterns": [
						{
							"match": "\\\\.",
							"name": "constant.character.escape.smarty"
						}
					],
					"end": "'",
					"endCaptures": {
						"0": {"name": "punctuation.definition.string.end.smarty"}
					}
				},
				{
					"name": "string.quoted.double.smarty",
					"begin": "\"",
					"beginCaptures": {
						"0": {"name": "punctuation.definition.string.begin.smarty"}
					},
					"patterns": [
						{
							"match": "\\\\.",
							"name": "constant.character.escape.smarty"
						}
					],
					"end": "\"",
					"endCaptures": {
						"0": {"name": "punctuation.definition.string.end.smarty"}
					}
				},
			]
		},
		"variables": {
			"patterns": [
				{
					"match": "\\b(\\$)Smarty\\.",
					"name": "variable.other.global.smarty",
					"captures": {
						"1": { "name": "punctuation.definition.variable.smarty" }
					}
				},
				{
					"match": "(\\$)([a-zA-Z_][a-zA-Z0-9_]*)\\b",
					"name": "variable.other.smarty",
					"captures": {
						"1": { "name": "punctuation.definition.variable.smarty" },
						"2": { "name": "variable.other.smarty" }
					}
				},
				{
					"match": "(->)([a-zA-Z_][a-zA-Z0-9_]*)\\b",
					"name": "variable.other.smarty",
					"captures": {
						"1": { "name": "keyword.operator.smarty" },
						"2": { "name": "variable.other.property.smarty" }
					}
				},
				{
					"match": "(->)([a-zA-Z_][a-zA-Z0-9_]*)(\\().*?(\\))",
					"name": "variable.other.smarty",
					"captures": {
						"1": { "name": "keyword.operator.smarty" },
						"2": { "name": "meta.function-call.object.smarty" },
						"3": { "name": "punctuation.definition.variable.smarty" },
						"4": { "name": "punctuation.definition.variable.smarty" }
					}
				}
			]
		},
		"lang": {
			"patterns": [
				{
					"match": "(!=|!|<=|>=|<|>|===|==|%|&&|\\|\\|)|\\b(and|or|eq|neq|ne|gte|gt|ge|lte|lt|le|not|mod)\\b",
					"name": "keyword.operator.smarty"
				},
				{
					"match": "\\b(TRUE|FALSE|true|false)\\b",
					"name": "constant.language.smarty"
				},
				{
					"match": "\\b(if|else|elseif|foreach|foreachelse|section|switch|case|break|default)\\b",
					"name": "keyword.control.smarty"
				},
				{
					"match": "\\b([a-zA-Z]+)=",
					"name": "meta.attribute.smarty",
					"captures": {
						"0": { "name": "variable.parameter.smarty" }
					},
				},
				{
					"match": "\\b(capture|config_load|counter|cycle|debug|eval|fetch|include_php|include|insert|literal|math|strip|rdelim|ldelim|assign|constant|block|html_[a-z_]*)\\b",
					"name": "support.function.built-in.smarty"
				},
				{
					"match": "\\|(capitalize|cat|count_characters|count_paragraphs|count_sentences|count_words|date_format|default|escape|indent|lower|nl2br|regex_replace|replace|spacify|string_format|strip_tags|strip|truncate|upper|wordwrap)",
					"name": "support.function.variable-modifier.smarty"
				}
			]
		},
		"blocks": {
			"patterns": [
				{
					"name": "source.smarty",
					"begin": "(\\{%?)",
					"beginCaptures": {
						"1": { "name": "punctuation.section.embedded.begin.smarty" }
					},
					"end": "(%?\\})",
					"endCaptures": {
						"1": { "name": "punctuation.section.embedded.end.smarty" }
					},
					"patterns": [
						{
							"include": "#strings"
						},
						{
							"include": "#variables"
						},
						{
							"include": "#lang"
						}
					]
				}
			]
		}
	},

	"patterns": [
		{
			"include": "#comments"
		},
		{
			"include": "#blocks"
		},
		{
			"include": "text.html.basic"
		}
	],
	"uuid": "6da52972-8eac-45fb-bd80-b48a203f8af0"
}